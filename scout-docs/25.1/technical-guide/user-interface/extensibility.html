<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Extensibility :: Eclipse Scout</title>
    <link rel="prev" href="mobile.html">
    <link rel="next" href="texts.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">Eclipse Scout Docs</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search Docs">
      		  <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:scout-docs"> In this project
          </label>
        </div>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <a class="logo" href="https://www.eclipse.org/scout"><img src="../../../24.2/index.html/../../../_/img/eclipse-scout-logo.svg" alt="Eclipse Scout"></a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="scout-docs" data-version="25.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Eclipse Scout</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../getstarted/getstarted.html">Get Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scout Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/helloscout.html">Hello Scout Classic</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/run-as-service.html">Build Scout App and Run as Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/run-as-docker-container.html">Run as Docker Container</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/one-day-tutorial.html">One Day Tutorial</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scout JS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/helloscout-js.html">Hello Scout JS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/helloscout-js-fullstack.html">Hello Scout JS Full Stack</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/helloscout-cdn.html">Hello Scout JS with a CDN</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../technical-guide.html">Technical Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Common Concepts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/platform.html">Platform</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/application.html">Application</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/exception-handling.html">Working with exceptions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/job-manager.html">JobManager</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/run-context.html">RunContext</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/run-monitor.html">RunMonitor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/smtp-helper.html">SmtpHelper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../common-concepts/observability.html">Observability</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">User Interface</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="widget.html">Widget</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="object-factory.html">Object Factory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="form.html">Form</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="form-field.html">Form Field</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="composite-field.html">Composite Field</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="group-box.html">Group Box</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="logical-grid.html">Logical Grid</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="value-field.html">Value Field</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="desktop.html">Desktop</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="outline.html">Outline</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="page.html">Page</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="styling.html">Styling</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="mobile.html">Mobile Support</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="extensibility.html">Extensibility</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="texts.html">Texts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="icons.html">Icons</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="widget-reference.html">Widget Reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ui-callback.html">UI Callbacks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="html-document-parser.html">HTML Document Parser</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="typescript.html">TypeScript Support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="build-stack.html">Build Stack</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="browser-support.html">Browser Support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Working with Data</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/lookup-call.html">Lookup Call</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/code-type.html">Code Type</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/client-notification.html">Client Notifications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/ui-notifications.html">UI Notifications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/data-object.html">Data Objects</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/rest.html">REST</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/jax-ws.html">Webservices with JAX-WS</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../sdk/sdk.html">Scout SDK</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../sdk/sdk-intellij.html">Scout SDK for IntelliJ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../sdk/sdk-eclipse.html">Scout SDK for Eclipse</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../howtos/how-tos.html">How-Tos</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scout Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-classic/chart-how-to.html">How to Create a Chart</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-classic/smart-field-how-to.html">SmartField: How to Apply Colors and Styles From a Lookup Row</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-classic/js-form-how-to.html">How to open a Scout JS form in a Scout Classic application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scout JS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-js/chart-how-to.html">How to Create a Chart</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-js/flip-card-how-to.html">How to Create a Custom Field</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-js/rest-service-how-to.html">How to Use a REST Service in Scout JS</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../releasenotes/release-notes.html">Release Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../migration/migration-guide.html">Migration Guide</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Eclipse Scout</span>
    <span class="version">25.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../../24.2/index.html">Eclipse Scout</a>
      <ul class="versions">
        <li class="version is-current">
          <a href="../../index.html">25.1</a>
        </li>
        <li class="version is-latest">
          <a href="../../../24.2/index.html">24.2</a>
        </li>
        <li class="version">
          <a href="../../../24.1/index.html">24.1</a>
        </li>
        <li class="version">
          <a href="../../../23.2/index.html">23.2</a>
        </li>
        <li class="version">
          <a href="../../../23.1/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../22/index.html">22</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../24.2/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Eclipse Scout</a></li>
    <li><a href="../technical-guide.html">Technical Guide</a></li>
    <li>User Interface</li>
    <li><a href="extensibility.html">Extensibility</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">25.1</button>
  <div class="version-menu">
    <a class="version is-current" href="extensibility.html">25.1</a>
    <a class="version" href="../../../24.2/technical-guide/user-interface/extensibility.html">24.2</a>
    <a class="version" href="../../../24.1/technical-guide/user-interface/extensibility.html">24.1</a>
    <a class="version" href="../../../23.2/technical-guide/user-interface/extensibility.html">23.2</a>
    <a class="version" href="../../../23.1/technical-guide/user-interface/extensibility.html">23.1</a>
    <a class="version" href="../../../22/technical-guide/user-interface/extensibility.html">22</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/eclipse-scout/scout.docs/edit/releases/25.1/docs/modules/technical-guide/pages/user-interface/extensibility.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Extensibility</h1>
<div class="sect1">
<h2 id="scout-js-extensibility"><a class="anchor" href="#scout-js-extensibility"></a>Scout JS Extensibility</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The extensibility concepts of Scout allow you to extend or even replace methods of Scout widgets or objects.
You can also use it to extend your own objects or objects from a Scout based third party library.</p>
</div>
<div class="paragraph">
<p>There are mainly two ways to extend an object:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extension by Sub-Classing</p>
</li>
<li>
<p>Extension by Composition</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="extension-by-sub-classing"><a class="anchor" href="#extension-by-sub-classing"></a>Extension by Sub-Classing</h3>
<div class="paragraph">
<p>Extending an object using sub-classing is simple and straight forward.
It can either be used to create a custom widget and only use it for certain cases.
And it can even be used to replace a specific widget completely, so your widget will be used every time the original widget is requested.</p>
</div>
<div class="paragraph">
<p>To extend from a widget, just create a new class, extend from the desired widget class and override the methods you want to adjust.</p>
</div>
<div class="listingblock">
<div class="title">Listing 1. SpecialStringField.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {StringField} from '@eclipse-scout/core';

export class SpecialStringField extends StringField {
  // Override desired methods
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, register it in your <code>index</code> file as usual and use it in your code by creating a new instance with <code>scout.create(SpecialStringField)</code> or as part of a model:</p>
</div>
<div class="listingblock">
<div class="title">Listing 2. index.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">// ...
export * from './SpecialStringField';
// ...
ObjectFactory.get().registerNamespace('yournamespace', self);</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 3. ExampleFormModel.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {FormModel, GroupBox} from '@eclipse-scout/core';
import {SpecialStringField} from './index';

export default (): FormModel =&gt; ({
  rootGroupBox: {
    objectType: GroupBox,
    fields: [
      {
        id: 'SpecialField',
        objectType: SpecialStringField,
        label: 'Your special field'
      }
    ]
  }
});

/* **************************************************************************
* GENERATED WIDGET MAPS
* **************************************************************************/

export type ExampleFormWidgetMap = {
  'SpecialField': SpecialStringField;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to replace every <code>StringField</code> in your application with <code>SpecialStringField</code>, you need to register a new object factory for the <code>objectType</code> <code>StringField</code> as follows:</p>
</div>
<div class="listingblock">
<div class="title">Listing 4. Adding a new object factory registration</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {scout} from '@eclipse-scout/core';
import {SpecialStringField} from './index';

scout.addObjectFactories({
  'StringField': () =&gt; new SpecialStringField()
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>More details can be found in the chapter <a href="object-factory.html" class="xref page">Object Factory</a>.</p>
</div>
<div class="sect3">
<h4 id="extending-a-model"><a class="anchor" href="#extending-a-model"></a>Extending a Model</h4>
<div class="paragraph">
<p>If you need to extend a widget that uses a model (see <a href="widget.html#creating-a-widget-declaratively" class="xref page">Creating a Widget Declaratively</a>), you may have to extend that model as well.
To do so, extend the widget as described above and either adjust the widgets in the <code>init</code> function directly.</p>
</div>
<div class="listingblock">
<div class="title">Listing 5. ExtendedForm.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {InitModelOf} from '@eclipse-scout/core';
import {ExampleForm} from './ExampleForm';

export class ExtendedForm extends ExampleForm {
  protected override _init(model: InitModelOf&lt;this&gt;) {
    super._init(model);
    this.widget('SpecialField').setLabel('New label for the special field');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or, for more complex cases, you can put your model adjustments in a separate file and use the declarative approach.
To do so, override the <code>_jsonModel</code> method and use <code>models.extend</code> to adapt the original model.</p>
</div>
<div class="listingblock">
<div class="title">Listing 6. ExtendedForm.ts with separate model</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {FormModel, models} from '@eclipse-scout/core';
import {ExampleForm} from './index';
import ExtendedFormModel from './ExtendedFormModel';

export class ExtendedForm extends ExampleForm {
  protected override _jsonModel(): FormModel {
    return models.extend(ExtendedFormModel, super._jsonModel());
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, create a new file that will contain your model extensions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the <code>target</code> keyword to specify which widget should be adjusted.</p>
</li>
<li>
<p>With the <code>operation</code> keyword you define, whether properties should be adjusted (<code>appendTo</code>) or new objects should be inserted (<code>insert</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example contains an extension for the field with the id <code>SpecialField</code> that sets a new value for the label.</p>
</div>
<div class="listingblock">
<div class="title">Listing 7. ExtendedFormModel.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {ExtensionModel} from '@eclipse-scout/core';

export default (): ExtensionModel =&gt; ({
  type: 'extension',
  extensions: [
    {
      operation: 'appendTo',
      target: {
        id: 'SpecialField'
      },
      extension: {
        label: 'New label for the special field'
      }
    }
  ]
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="extension-by-composition"><a class="anchor" href="#extension-by-composition"></a>Extension by Composition</h3>
<div class="paragraph">
<p>Extension by Composition allows to have multiple, independent extensions of a Scout object.
It also allows the adjustment of super classes of objects from which it is not possible to inherit, e.g. <code>FormField</code> or even <code>Widget</code>.</p>
</div>
<div class="paragraph">
<p>This extension feature works by wrapping functions on the prototype of a Scout object
with a wrapper function which is provided by an extension. The extension feature doesn&#8217;t rely on
subclassing, instead we simply register one or more extensions for a single Scout class. When a
function is called on an extended object, the functions are called on the registered extensions
first. Since a Scout class can have multiple extensions, we speak of an extension chain, where the
last element of the chain is the original (extended) object.</p>
</div>
<div class="paragraph">
<p>The base class for all extensions is <code>Extension</code>. This class is used to extend an existing
Scout object. In order to use the extension feature you must subclass Extension and
implement an <code>init</code> function, where you register the functions you want to extend. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {Extension, StringField} from '@eclipse-scout/core';

export class MyExtension extends Extension {
  init() {
    this.extend(StringField.prototype, '_init');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you implement functions with the same name and signature on the extension class. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {Extension, InitModelOf, StringField} from '@eclipse-scout/core';

export class MyExtension extends Extension&lt;StringField&gt; {
  init() {
    this.extend(StringField.prototype, '_init');
  }

  _init(model: InitModelOf&lt;StringField&gt;) {
    // Call the original _init() method of the StringField class
    this.next(model);
    // Extend the instance with a new property called bar with the value foo
    // -&gt; EVERY string field now has this new property
    this.extended.setProperty('bar', 'foo');
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The extension feature sets two properties on the extension instance before the extended method
is called. These two properties are described below. The function scope (this) is set to the extension
instance when the extended function is called.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">next</dt>
<dd>
<p>is a reference to the next extended function or the original function of the extended object,
in case the current extension is the last extension in the extension chain.</p>
</dd>
<dt class="hdlist1">extended</dt>
<dd>
<p>is the extended or original object.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>All extensions must be registered in the <code>_installExtensions</code> function of your <code>App</code>.</p>
</div>
<div class="paragraph">
<p>You can find your app in your entrypoint file that is linked in your <code>webpack.config.js</code>.
If you already have a custom <code>App</code>, just override <code>_installExtensions</code> and register the extension.
Otherwise, you need to create a custom <code>App</code> first by extending from the Scout <code>App</code> (or <code>RemoteApp</code> for Scout Classic) and make sure
this new app is initialized rather than the default one.</p>
</div>
<div class="listingblock">
<div class="title">Listing 8. CustomApp.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {App, Extension} from '@eclipse-scout/core';
import {MyExtension} from './index';

export class CustomApp extends App {
  override _installExtensions() {
    Extension.install([
      MyExtension
    ]);
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Listing 9. Entry point file</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import CustomApp from './CustomApp';

let app = new CustomApp();
app.init();</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scout-classic-extensibility"><a class="anchor" href="#scout-classic-extensibility"></a>Scout Classic Extensibility</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Required version: The API described here requires Scout version 4.2 or newer.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="overview"><a class="anchor" href="#overview"></a>Overview</h3>
<div class="paragraph">
<p>When working with large business applications it is often required to split the application into several modules. Some of those modules may be very basic and can be reused in multiple applications. For those it makes sense to provide them as binary library. But what if you have created great templates for your applications but in one special case you want to include one more column in a table or want to execute some other code when a pre-defined context menu is pressed? You cannot just modify the code because it is a general library used everywhere. This is where the extensibility concept helps.</p>
</div>
<div class="paragraph">
<p>To achieve this two new elements have been introduced:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Extension Classes: Contains modifications for a target class. Modifications can be new elements or changed behavior of existing elements.</p>
</li>
<li>
<p>Extension Registry: Service holding all Extensions that should be active in the application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Scout extensibility concept offers three basic possibilities to extend existing components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Extensions</strong> Changing behavior of a class</p>
</li>
<li>
<p><strong>Contributions</strong> Add new elements to a class</p>
</li>
<li>
<p><strong>Moves</strong> Move existing elements within a class</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following chapters will introduce this concepts and present some examples.</p>
</div>
</div>
<div class="sect2">
<h3 id="extensions"><a class="anchor" href="#extensions"></a>Extensions</h3>
<div class="paragraph">
<p>Extensions contain modifications to a target class. This target class must be extensible. All elements that implement <code>org.eclipse.scout.rt.shared.extension.IExtensibleObject</code> are extensible. And for all extensible elements there exists a corresponding abstract extension class.</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>AbstractStringField</code> is extensible. Therefore, there is a class <code>AbstractStringFieldExtension</code>.</p>
</li>
<li>
<p><code>AbstractCodeType</code> is extensible. Therefore, there is a class <code>AbstractCodeTypeExtension</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Target classes can be all that are instanceof those extensible elements. This means an <code>AbstractStringFieldExtension</code> can be applied to <code>AbstractStringField</code> and all child classes.</p>
</div>
<div class="paragraph">
<p>Extensions contain methods for all Scout operations (inherited methods starting with <code>exec</code>). Those methods have the same signature except that they have one more input parameter. This method allows you to intercept the given Scout Operation and execute your own code even though the declaring class exists in a binary library. It is then your decision if you call the original code or completely replace it. To achieve this the <a href="http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern">Chain Pattern</a> is used: All extensions for a target class are called as part of a chain. The order is given by the order in which the extensions are registered. And the original method of the Scout element is an extension as well.</p>
</div>
<div class="paragraph">
<p>Extensions to specific types of elements are prepared as abstract classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AbstractGroupBoxExtension</p>
</li>
<li>
<p>AbstractImageFieldExtension</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following image visualizes the extension chain used to intercept the default behavior of a component:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../common/_images/scout_extensibility_chain_concept.png" alt="scout extensibility chain concept">
</div>
</div>
<div class="sect3">
<h4 id="extending-a-stringfield-example"><a class="anchor" href="#extending-a-stringfield-example"></a>Extending a StringField example</h4>
<div class="paragraph">
<p>The following example changes the initial value of a StringField called <code>NameField</code>:</p>
</div>
<div class="listingblock">
<div class="title">Listing 10. Extension for NameField</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class NameFieldExtension extends AbstractStringFieldExtension&lt;NameField&gt; {

  public NameFieldExtension(NameField owner) {
    super(owner);
  }

  @Override
  public void execInitField(FormFieldInitFieldChain chain) {
    chain.execInitField(); // call the original exec init. whatever it may do.
    getOwner().setValue("FirstName LastName"); // overwrite the initial value of the name field
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note: The type parameter of the extension (e.g. <code>NameField</code>) denotes the element which is extended.</p>
</div>
<div class="paragraph">
<p>The extension needs to be registered when starting the application:</p>
</div>
<div class="listingblock">
<div class="title">Listing 11. Register extension for NameField</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Jobs.schedule(() -&gt; BEANS.get(IExtensionRegistry.class).register(NameFieldExtension.class), Jobs.newInput()
    .withRunContext(ClientRunContexts.copyCurrent())
    .withName("register extension"));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="contributions"><a class="anchor" href="#contributions"></a>Contributions</h3>
<div class="paragraph">
<p>The section before explained how to modify the behavior of existing Scout elements. This section will describe how to contribute new elements into existing containers.</p>
</div>
<div class="paragraph">
<p>This is done by using the same mechanism as before. It is required to create an Extension too. But instead of overwriting any Scout Operation we directly define the new elements within the Extension. A lot of new elements can be added this way: Fields, Menus, Columns, Codes, &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Some new elements may also require a new <a href="http://en.wikipedia.org/wiki/Data_transfer_object">DTO</a> (FormData, TablePageData, TableData) to be filled with data from the server. The corresponding DTO for the extension is automatically created when using the Scout Plugin 4.2 or newer in your IDE and having the <code>@Data</code> annotation specified on your extension. As soon as the DTO extension has been registered in the <code>IExtensionRegistry</code> service it is automatically created when the target DTO is created and will also be imported and exported automatically!</p>
</div>
<div class="paragraph">
<p>The following example adds two new fields for salary and birthday to a <code>PersonForm</code>. Please note the <code>@Data</code> annotation which describes where the DTO for this extension should be created.</p>
</div>
<div class="listingblock">
<div class="title">Listing 12. Extension for PersonForm</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * Extension for the MainBox of the PersonForm
 */
@Data(PersonFormMainBoxExtensionData.class)
public class PersonFormMainBoxExtension extends AbstractGroupBoxExtension&lt;MainBox&gt; {

  public PersonFormMainBoxExtension(MainBox ownerBox) {
    super(ownerBox);
  }

  @Order(2000)
  @ClassId("fda7cd67-0df1-4194-9d70-22a9b3ce890d")
  public class SalaryField extends AbstractBigDecimalField {
  }

  @Order(3000)
  @ClassId("478037fb-759f-4fa1-b737-c77f903c6881")
  public class BirthdayField extends AbstractDateField {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Beware: Field names must be unique throughout form and extensions (e.g. there may not be a field on the form or another extension contributing to the same form with the same field name). However, it is possible to create templates (e.g. a group box as container with its own @FormData annotation) which is added multiple times through a form or extensions.</p>
</div>
<div class="paragraph">
<p>The extension data must be registered manually in the job like in the example before:</p>
</div>
<div class="listingblock">
<div class="title">Listing 13. Register extension for PersonForm</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BEANS.get(IExtensionRegistry.class).register(PersonFormMainBoxExtension.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the Scout IDE plugin automatically creates the extension DTO which could look as follows. Please note: The DTO is generated automatically, but you have to register the generated DTO manually!</p>
</div>
<div class="listingblock">
<div class="title">Listing 14. Extension Data for PersonForm</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Extends(PersonFormData.class)
@Generated(value = "org.eclipse.scout.docs.snippets.person.PersonFormMainBoxExtension", comments = "This class is auto generated by the Scout SDK. No manual modifications recommended.")
public class PersonFormMainBoxExtensionData extends AbstractFormFieldData {
  private static final long serialVersionUID = 1L;

  public Birthday getBirthday() {
    return getFieldByClass(Birthday.class);
  }

  public Salary getSalary() {
    return getFieldByClass(Salary.class);
  }

  @ClassId("478037fb-759f-4fa1-b737-c77f903c6881-formdata")
  public static class Birthday extends AbstractValueFieldData&lt;Date&gt; {
    private static final long serialVersionUID = 1L;
  }

  @ClassId("fda7cd67-0df1-4194-9d70-22a9b3ce890d-formdata")
  public static class Salary extends AbstractValueFieldData&lt;BigDecimal&gt; {
    private static final long serialVersionUID = 1L;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also access the values of the DTO extension as follows:</p>
</div>
<div class="listingblock">
<div class="title">Listing 15. Access extended fields</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// create a normal FormData
// contributions are added/imported/exported automatically
PersonFormData data = new PersonFormData();

// access the data of an extension
PersonFormMainBoxExtensionData c = data.getContribution(PersonFormMainBoxExtensionData.class);
c.getSalary().setValue(new BigDecimal("200.0"));</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="extending-a-form-and-a-handler"><a class="anchor" href="#extending-a-form-and-a-handler"></a>Extending a form and a handler</h4>
<div class="paragraph">
<p>Extending a AbstractForm and one (or more) of its AbstractFormHandlers that can be achieved as follows:</p>
</div>
<div class="listingblock">
<div class="title">Listing 16. Extension for PersonForm</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class PersonFormExtension extends AbstractFormExtension&lt;PersonForm&gt; {

  public PersonFormExtension(PersonForm ownerForm) {
    super(ownerForm);
  }

  @Override
  public void execInitForm(FormInitFormChain chain) {
    chain.execInitForm();
    // Example logic: Access the form, disable field
    getOwner().getNameField().setEnabled(false, true, true);
  }

  public void testMethod() {
    MessageBoxes.create().withHeader("Extension method test").withBody("A method from the form extension was called").show();
  }

  public static class NewFormHandlerExtension extends AbstractFormHandlerExtension&lt;NewHandler&gt; {

    public NewFormHandlerExtension(NewHandler owner) {
      super(owner);
    }

    @Override
    public void execPostLoad(FormHandlerPostLoadChain chain) {
      chain.execPostLoad();
      // Example logic: Show a message box after load
      MessageBoxes.create().withHeader("Extension test").withBody("If you can read this, the extension works correctly").show();

      // Access element from the outer extension.
      PersonFormExtension extension = ((AbstractForm) getOwner().getForm()).getExtension(PersonFormExtension.class);
      extension.testMethod();
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are a few things to note about this example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It is only necessary to register the outer form extension, not the inner handler extension as well.</p>
</li>
<li>
<p>The inner handler extension must be <code>static</code>, otherwise an Exception will occur when the extended form is being started!</p>
</li>
<li>
<p>You can access the element you are extending by calling <code>getOwner()</code>.</p>
</li>
<li>
<p>Since you cannot access elements from your form extension directly from the inner handler extension (because it is static), you will need to retrieve the form extension via the <code>getExtension(Class&lt;T extends IExtension&lt;?&gt;&gt;)</code> method on the extended object, as done here to retrieve the form extension from the form handler extension.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="move-elements"><a class="anchor" href="#move-elements"></a>Move elements</h3>
<div class="paragraph">
<p>You can also move existing Scout elements to other positions. For this you have to register a move command in the IExtensionRegistry. As with all extension registration it is added to the extension registration Job in your Activator class:</p>
</div>
<div class="listingblock">
<div class="title">Listing 17. Move NameField to LastBox</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">BEANS.get(IExtensionRegistry.class).registerMove(NameField.class, 20d, LastBox.class);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="migration"><a class="anchor" href="#migration"></a>Migration</h3>
<div class="paragraph">
<p>The new extensibility concept is added on top of all existing extension possibilities like injection or sub-classing. Therefore, it works together with the current mechanisms. But for some use cases (like modifying template classes) it offers a lot of benefits. Therefore, no migration is necessary. The concepts do exist alongside each others.</p>
</div>
<div class="paragraph">
<p>However, there is one impact: Because the Scout Operation methods are now part of a call chain they may no longer be invoked directly. So any call to e.g. <code>execValidateValue()</code> is no longer allowed because this would exclude the extensions for this call. The Scout SDK marks such calls with error markers in the Eclipse Problems view. If really required the corresponding intercept-Method can be used. So instead directly calling <code>myField.execChangedValue</code> you may call <code>myField.interceptChangedValue()</code>.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="mobile.html">Mobile Support</a></span>
  <span class="next"><a href="texts.html">Texts</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using Antora.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
