<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>RunContext :: Eclipse Scout</title>
    <link rel="prev" href="job-manager.html">
    <link rel="next" href="run-monitor.html">
    <meta name="generator" content="Antora 3.1.7">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">Eclipse Scout Docs</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search Docs">
      		  <label class="filter checkbox">
            <input type="checkbox" data-facet-filter="component:scout-docs"> In this project
          </label>
        </div>
      </div>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <a class="logo" href="https://www.eclipse.org/scout"><img src="../../index.html/../../../_/img/eclipse-scout-logo.svg" alt="Eclipse Scout"></a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="scout-docs" data-version="24.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Eclipse Scout</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../getstarted/getstarted.html">Get Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scout Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/helloscout.html">Hello Scout Classic</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/run-as-service.html">Build Scout App and Run as Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/run-as-docker-container.html">Run as Docker Container</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/one-day-tutorial.html">One Day Tutorial</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scout JS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/helloscout-js.html">Hello Scout JS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/helloscout-js-fullstack.html">Hello Scout JS Full Stack</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../getstarted/helloscout-cdn.html">Hello Scout JS with a CDN</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../technical-guide.html">Technical Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Common Concepts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="platform.html">Platform</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="exception-handling.html">Working with exceptions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="job-manager.html">JobManager</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="run-context.html">RunContext</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="run-monitor.html">RunMonitor</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="smtp-helper.html">SmtpHelper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="observability.html">Observability</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">User Interface</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/widget.html">Widget</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/object-factory.html">Object Factory</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/form.html">Form</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/form-field.html">Form Field</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/composite-field.html">Composite Field</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/group-box.html">Group Box</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/logical-grid.html">Logical Grid</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/value-field.html">Value Field</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/desktop.html">Desktop</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/outline.html">Outline</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/page.html">Page</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/styling.html">Styling</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/mobile.html">Mobile Support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/extensibility.html">Extensibility</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/texts.html">Texts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/icons.html">Icons</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/widget-reference.html">Widget Reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/html-document-parser.html">HTML Document Parser</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/typescript.html">TypeScript Support</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/build-stack.html">Build Stack</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../user-interface/browser-support.html">Browser Support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Working with Data</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/lookup-call.html">Lookup Call</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/code-type.html">Code Type</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/client-notification.html">Client Notifications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/ui-notifications.html">UI Notifications</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/data-object.html">Data Objects</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/rest.html">REST</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../working-with-data/jax-ws.html">Webservices with JAX-WS</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../sdk/sdk.html">Scout SDK</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../sdk/sdk-intellij.html">Scout SDK for IntelliJ</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../sdk/sdk-eclipse.html">Scout SDK for Eclipse</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../howtos/how-tos.html">How-Tos</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scout Classic</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-classic/chart-how-to.html">How to Create a Chart</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-classic/smart-field-how-to.html">SmartField: How to Apply Colors and Styles From a Lookup Row</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-classic/js-form-how-to.html">How to open a Scout JS form in a Scout Classic application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Scout JS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-js/chart-how-to.html">How to Create a Chart</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../howtos/scout-js/flip-card-how-to.html">How to Create a Custom Field</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../releasenotes/release-notes.html">Release Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../migration/migration-guide.html">Migration Guide</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Eclipse Scout</span>
    <span class="version">24.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Eclipse Scout</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">24.1</a>
        </li>
        <li class="version">
          <a href="../../../23.2/index.html">23.2</a>
        </li>
        <li class="version">
          <a href="../../../23.1/index.html">23.1</a>
        </li>
        <li class="version">
          <a href="../../../22/index.html">22</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Eclipse Scout</a></li>
    <li><a href="../technical-guide.html">Technical Guide</a></li>
    <li>Common Concepts</li>
    <li><a href="run-context.html">RunContext</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">24.1</button>
  <div class="version-menu">
    <a class="version is-current" href="run-context.html">24.1</a>
    <a class="version" href="../../../23.2/technical-guide/common-concepts/run-context.html">23.2</a>
    <a class="version" href="../../../23.1/technical-guide/common-concepts/run-context.html">23.1</a>
    <a class="version" href="../../../22/technical-guide/common-concepts/run-context.html">22</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/eclipse-scout/scout.docs/edit/releases/24.1/docs/modules/technical-guide/pages/common-concepts/run-context.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">RunContext</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Mostly, code is run on behalf of some semantic context, for example as a particular <code>Subject</code> and with some context related <code>ThreadLocals</code> set, e.g. the user&#8217;s <code>session</code> and its <code>Locale</code>. Scout provides you with different <code>RunContexts</code>, such as <code>ClientRunContext</code> or <code>ServerRunContext</code>. They all share some common characteristics like <code>Subject</code>, <code>Locale</code> and <code>RunMonitor</code>, but also provide some additional functionality like transaction boundaries if using <code>ServerRunContext</code>. Also, a <code>RunContext</code> facilitates propagation of state among different threads. In order to ease readability, the 'setter-methods' of the <code>RunContext</code> support method chaining.</p>
</div>
<div class="paragraph">
<p>All a <code>RunContext</code> does is to provide some setter methods to construct the context, and a <code>run</code> and <code>call</code> method to run an action on behalf of that context. Thereby, the only difference among those two methods is their argument. Whereas <code>run</code> takes a <code>IRunnable</code> instance, <code>call</code> takes a <code>Callable</code> to additionally return a result to the caller. The action is run in the current thread, meaning that the  caller is blocked until completion.</p>
</div>
<div class="paragraph">
<p>By default, a <code>RunContext</code> is associated with a <code>RunMonitor</code>, and the monitor&#8217;s cancellation status can be queried via <code>RunMonitor.CURRENT.get().isCancelled()</code>. The monitor allows for hard cancellation, meaning that the executing thread is interrupted upon cancellation. For instance if waiting on an interruptible construct like <code>Object.wait()</code> or <code>IFuture.awaitDone()</code>, the waiting thread returns with an interruption exception.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="factory-methods-to-create-a-runcontext"><a class="anchor" href="#factory-methods-to-create-a-runcontext"></a>Factory methods to create a RunContext</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Typically, a <code>RunContext</code> is created from a respective factory like <code>RunContexts</code> to create a <code>RunContext</code>, or <code>ServerRunContexts</code> to create a <code>ServerRunContext</code>, or <code>ClientRunContexts</code> to create a <code>ClientRunContext</code>. Internally, the <code>BeanManager</code> is asked to provide a new instance of the <code>RunContext</code>, which allows you to replace the default implementation of a <code>RunContext</code> in an easy way. The factories declare two factory methods: <code>empty()</code> and <code>copyCurrent()</code>. Whereas <code>empty()</code> provides you an empty <code>RunContext</code>, <code>copyCurrent()</code> takes a snapshot of the current calling context and initializes the <code>RunContext</code> accordingly. That is useful if only some few values are to be changed, or, if using <code>ServerRunContext</code>, to run the code on behalf of a new transaction.</p>
</div>
<div class="paragraph">
<p>The following <a href="#lst-RunContexts.empty">Listing 1</a> illustrates the creation of an empty <code>RunContext</code> initialized with a particular <code>Subject</code> and <code>Locale</code>.</p>
</div>
<div id="lst-RunContexts.empty" class="listingblock">
<div class="title">Listing 1. Creation of an empty <code>RunContext</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Subject subject = new Subject(); <i class="conum" data-value="1"></i><b>(1)</b>
subject.getPrincipals().add(new SimplePrincipal("john"));
subject.setReadOnly();

<i class="conum" data-value="2"></i><b>(2)</b>
RunContexts.empty()
    .withSubject(subject)
    .withLocale(Locale.US)
    .run(() -&gt; {
      // run some code <i class="conum" data-value="3"></i><b>(3)</b>
      System.out.println(NlsLocale.CURRENT.get()); // &gt; Locale.US
      System.out.println(Subject.getSubject(AccessController.getContext())); // &gt; john
    });</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>create the <code>Subject</code> to do some work on behalf</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create and initialize the <code>RunContext</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This code is run on behalf of the <code>RunContext</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following <a href="#lst-RunContexts.copyCurrent">Listing 2</a> illustrates the creation of a 'snapshot' of the current calling <code>RunContext</code> with another <code>Locale</code> set.</p>
</div>
<div id="lst-RunContexts.copyCurrent" class="listingblock">
<div class="title">Listing 2. Create a copy of the current calling <code>RunContext</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">RunContexts.copyCurrent()
    .withLocale(Locale.US)
    .run(() -&gt; {
      // run some code
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>An important difference is related to the <code>RunMonitor</code>. By using the <code>copyCurrent()</code> factory method, the context&#8217;s monitor is additionally registered as child monitor of the monitor of the current calling context. That way, a cancellation request to the calling context is propagated down to this context as well. Of course, that behavior can be overwritten by providing another monitor yourself.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="properties-of-a-runcontext"><a class="anchor" href="#properties-of-a-runcontext"></a>Properties of a RunContext</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following properties are declared on a <code>RunContext</code> and are inherited by <code>ServerRunContext</code> and <code>ClientRunContext</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 80%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">property</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">accessibility</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">runMonitor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitor to query the cancellation status of the context.</p>
<p class="tableblock">* must not be <code>null</code>
* is automatically set if creating the context by its factory
* is automatically registered as child monitor if creating the context by <code>copyCurrent()</code> factory method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RunMonitor.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">subject</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject to run the code on behalf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subject.getSubject(AccessController.getContext())</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">locale</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Locale to be bound to the Locale <code>ThreadLocal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NlsLocale.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">propertyMap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Properties to be bound to the Property  <code>ThreadLocal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PropertyMap.CURRENT.get()</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="properties-of-a-serverruncontext"><a class="anchor" href="#properties-of-a-serverruncontext"></a>Properties of a ServerRunContext</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>ServerRunContext</code> controls propagation of server-side state and sets the transaction boundaries, and is a specialization of <code>RunContext</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 80%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">property</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">accessibility</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">session</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session to be bound to Session <code>ThreadLocal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISession.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transactionScope</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To control transaction boundaries. By default, a new transaction is started, and committed or rolled back upon completion.</p>
<p class="tableblock"> * Use <code>TransactionScope.REQUIRES_NEW</code> to run the code in a new transaction (by default).
 * Use <code>TransactionScope.REQUIRED</code> to only start a new transaction if not running in a transaction yet.
 * Use <code>TransactionScope.MANDATORY</code> to enforce that the caller is already running in a transaction. Otherwise, a <code>TransactionRequiredException</code> is thrown.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ITransaction.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transaction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the transaction to be used to run the runnable. Has only an effect, if transaction scope is set to TransactionScope.REQUIRED or TransactionScope.MANDATORY. Normally, this property should not be set manually.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ITransaction.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clientNotificationCollector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To associate the context with the given ClientNotificationCollector, meaning that any code running on behalf of this context has that collector set in ClientNotificationCollector.CURRENT thread-local.<br>
That collector is used to collect all transactional client notifications, which are to be published upon successful commit of the associated transaction, and which are addressed to the client node which triggered processing (see withClientNodeId(String)). That way, transactional client notifications are not published immediately upon successful commit, but included in the client&#8217;s response instead (piggyback).<br>
Typically, that collector is set by ServiceTunnelServlet for the processing of a service request.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ClientNotificationCollector.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clientNodeId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associates this context with the given 'client node ID', meaning that any code running on behalf of this context has that id set in IClientNodeId.CURRENT thread-local.<br>
Every client node (that is every UI server node) has its unique 'node ID' which is included with every 'client-server' request, and is mainly used to publish client notifications. If transactional client notifications are issued by code running on behalf of this context, those will not be published to that client node, but included in the request&#8217;s response instead (piggyback).<br>
However, transactional notifications are only sent to clients upon successful commit of the transaction.<br>
Typically, this node ID is set by ServiceTunnelServlet for the processing of a service request.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IClientNodeId.CURRENT.get()</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="properties-of-a-clientruncontext"><a class="anchor" href="#properties-of-a-clientruncontext"></a>Properties of a ClientRunContext</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A <code>ClientRunContext</code> controls propagation of client-side state, and is a specialization of <code>RunContext</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 80%;">
<col style="width: 10%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">property</th>
<th class="tableblock halign-left valign-top">description</th>
<th class="tableblock halign-left valign-top">accessibility</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">session</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Session to be bound to Session <code>ThreadLocal</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ISession.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">form</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associates this context with the given <code>IForm</code>, meaning that any code running on behalf of this context has that <code>IForm</code> set in <code>IForm.CURRENT</code> thread-local.<br>
That information is mainly used to determine the current calling model context, e.g. when opening a message-box to associate it with the proper <code>IDisplayParent</code>.<br>
Typically, that information is set by the UI facade when dispatching a request from UI, or when constructing UI model elements.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IForm.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">outline</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associates this context with the given <code>IOutline</code>, meaning that any code running on behalf of this context has that <code>IOutline</code> set in <code>IOutline.CURRENT</code> thread-local.<br>
That information is mainly used to determine the current calling model context, e.g. when opening a message-box to associate it with the proper <code>IDisplayParent</code>.<br>
Typically, that information is set by the UI facade when dispatching a request from UI, or when constructing UI model elements.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IOutline.CURRENT.get()</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">desktop</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associates this context with the given <code>IDesktop</code>, meaning that any code running on behalf of this context has that <code>IDesktop</code> set in <code>IDesktop.CURRENT thread-local</code>.<br>
That information is mainly used to determine the current calling model context, e.g. when opening a message-box to associate it with the proper <code>IDisplayParent</code>.<br>
Typically, that information is set by the UI facade when dispatching a request from UI, or when constructing UI model elements.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IDesktop.CURRENT.get()</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="job-manager.html">JobManager</a></span>
  <span class="next"><a href="run-monitor.html">RunMonitor</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using Antora.</p>
</footer>
<script id="site-script" src="../../../../_/js/site.js" data-ui-root-path="../../../../_"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
